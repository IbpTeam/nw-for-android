<html>
<body>
<script>
function printGlobalLog(parent)
{
    for (var i = 0; i < global.logs.length; i++) {
        var sub_div = document.createElement("div");
        sub_div.innerHTML = global.logs[i];
        parent.appendChild(sub_div);
    }
}
function fun()
{
    try {
        var traverse = require("traverse");
        var obj = [ 5, 6, -3, [ 7, 8, -2, 1 ], { f : 10, g : -13 } ];
        traverse(obj).forEach(function (x) {
                if (x < 0) this.update(x + 128);
                });
        global.window.document.getElementById("div").innerHTML = "siyt:" + obj; //require("osenv");//
    } catch (e) {
        console.log("siyt(0708): error=" + e);
        /*        var div = global.window.document.getElementById("div");//.innerHTML = "error=" + e + "::::::" + global.logs.join();
                  div.innerHTML = "siyt(0713): error=" + e;
                  for (var i = 0; i < global.logs.length; i++) {
                  var sub_div = document.createElement("div");
                  sub_div.innerHTML = global.logs[i];
                  div.appendChild(sub_div);
                  }*/
    }
    var div = global.window.document.getElementById("div");
    printGlobalLog(div);
}
//console.log("siyt(0708): global.console=" + console);
var os=require('os');
console.log("siyt(0708): os.type=" + os.type());
console.log("siyt(0708): os.platform=" + os.platform());
function fun1()
{
    try {
        window.document.getElementById("div1").innerHTML = process;
    } catch (e) {
        console.log("siyt(0708): 1  error=" + e);
    }
    console.log(process);
}

function fun2()
{
    var fs = require("fs");
    var node_module_path = "/mnt/sdcard/content_shell/node_module";
    var parent_div = global.window.document.getElementById("div2");
    fs.readdir(node_module_path, function(err, files) {
            for (var i = 0; i < files.length; i++) {
            var sub_div = document.createElement("div");
            sub_div.innerHTML = files[i];
            parent_div.appendChild(sub_div);
            }
            });
    printGlobalLog(parent_div);
}

function fun3()
{
    try {
        var binding = require("binding");
        console.log(binding.hello());
        var parent_div = global.window.document.getElementById("div3");
        var sub_div = document.createElement("div");
        sub_div.innerHTML = binding.hello();
        parent_div.appendChild(sub_div);
    } catch (e) {
        var parent_div = global.window.document.getElementById("div3");
        var sub_div = document.createElement("div");
        sub_div.innerHTML = e;
        parent_div.appendChild(sub_div);
        printGlobalLog(parent_div);
    }
}

</script>
<div id="div"> div </div>
<input type="button" id="input" onclick="fun()" value="require('traverse')"/>
<div id="div1"> div </div>
<input type="button" id="input" onclick="fun1()" value="process"/>
<div id="div2"> div </div>
<input type="button" id="input" onclick="fun2()" value="require('fs')"/>
<div id="div3"> div </div>
<input type="button" id="input" onclick="fun3()" value="require('binding')"/>
</body>
</html>
